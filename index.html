<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fernando García | Solutions Portfolio</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <style>
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --sf-blue: #0176D3;
            --sf-blue-dark: #014486;
            --sf-blue-light: #00A1E0;
            --sf-cyan: #1AD6FF;
            --sf-navy: #032D60;
            --sf-green: #2E844A;
            --sf-green-light: #45C65A;

            --bg-primary: #FFFFFF;
            --bg-secondary: #F8FAFC;
            --bg-tertiary: #F1F5F9;
            --border: #E2E8F0;
            --border-light: #F1F5F9;
            --text-primary: #0F172A;
            --text-secondary: #475569;
            --text-tertiary: #64748B;
            --text-muted: #94A3B8;
            --card-bg: #FFFFFF;
            --nav-bg: rgba(255,255,255,0.88);
            --node-color: rgba(1, 118, 211, 0.08);
            --node-line: rgba(1, 118, 211, 0.06);
            --dot-active: var(--sf-blue);
            --dot-inactive: #CBD5E1;
            --toggle-bg: #F1F5F9;
            --toggle-icon: #F59E0B;
            --footer-bg: #0F172A;
            --footer-text: #64748B;

            --radius: 12px;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.04), 0 1px 2px rgba(0,0,0,0.02);
            --shadow-md: 0 4px 20px rgba(1,118,211,0.08);
            --shadow-lg: 0 12px 40px rgba(1,118,211,0.12);
            --shadow-card: 0 1px 3px rgba(0,0,0,0.04);

            --mono: 'JetBrains Mono', monospace;
            --heading: 'Space Grotesk', sans-serif;
            --body: 'Inter', sans-serif;
        }

        .dark {
            --bg-primary: #0F172A;
            --bg-secondary: #1E293B;
            --bg-tertiary: #334155;
            --border: #334155;
            --border-light: #1E293B;
            --text-primary: #F1F5F9;
            --text-secondary: #CBD5E1;
            --text-tertiary: #94A3B8;
            --text-muted: #64748B;
            --card-bg: #1E293B;
            --nav-bg: rgba(15, 23, 42, 0.92);
            --node-color: rgba(1, 118, 211, 0.12);
            --node-line: rgba(1, 118, 211, 0.08);
            --dot-inactive: #475569;
            --toggle-bg: #334155;
            --toggle-icon: #818CF8;
            --footer-bg: #0B1120;
            --footer-text: #475569;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.2);
            --shadow-md: 0 4px 20px rgba(0,0,0,0.25);
            --shadow-lg: 0 12px 40px rgba(0,0,0,0.3);
            --shadow-card: 0 1px 3px rgba(0,0,0,0.3);
        }

        html { scroll-behavior: smooth; }
        body {
            font-family: var(--body);
            color: var(--text-primary);
            background: var(--bg-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            transition: background 0.5s ease, color 0.4s ease;
            overflow-x: hidden;
        }

        /* --- REVEAL --- */
        .reveal {
            opacity: 0;
            transform: translateY(28px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }
        .reveal.visible { opacity: 1; transform: translateY(0); }
        .reveal-d1 { transition-delay: 0.1s; }
        .reveal-d2 { transition-delay: 0.2s; }
        .reveal-d3 { transition-delay: 0.3s; }
        .reveal-d4 { transition-delay: 0.4s; }

        /* --- CANVAS NODE NETWORK --- */
        #nodeCanvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        /* --- NAV --- */
        nav {
            position: fixed; top: 0; width: 100%; z-index: 100;
            background: var(--nav-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            transition: box-shadow 0.3s, background 0.5s ease;
        }
        nav.scrolled { box-shadow: var(--shadow-sm); }
        .nav-inner {
            max-width: 1100px; margin: 0 auto; padding: 0 2rem;
            height: 60px; display: flex; align-items: center; justify-content: space-between;
        }
        .nav-logo {
            font-family: var(--heading);
            font-weight: 700;
            font-size: 0.95rem;
            letter-spacing: -0.02em;
            color: var(--sf-blue);
        }
        .nav-right { display: flex; align-items: center; gap: 2rem; }
        .nav-links { display: flex; gap: 1.5rem; }
        .nav-links a {
            text-decoration: none;
            font-family: var(--mono);
            font-size: 0.68rem;
            font-weight: 500;
            color: var(--text-muted);
            transition: color 0.2s;
            letter-spacing: 0.03em;
        }
        .nav-links a:hover { color: var(--sf-blue); }
        .theme-toggle {
            width: 34px; height: 34px; border-radius: 8px;
            border: 1px solid var(--border); background: var(--toggle-bg);
            color: var(--toggle-icon); cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.8rem; transition: all 0.3s ease;
        }
        .theme-toggle:hover { border-color: var(--sf-blue); }
        .mobile-toggle {
            display: none; background: none; border: none;
            font-size: 1.2rem; color: var(--text-secondary); cursor: pointer;
        }

        /* --- SCROLL PROGRESS --- */
        .scroll-progress {
            position: fixed; top: 60px; left: 0; height: 2px;
            background: linear-gradient(90deg, var(--sf-blue), var(--sf-cyan));
            z-index: 101; width: 0%;
        }

        /* --- HERO (WHITE + TERMINAL) --- */
        .hero {
            position: relative;
            padding: 10rem 2rem 6rem;
            background: var(--bg-primary);
            min-height: 100vh;
            display: flex; align-items: center;
            transition: background 0.5s ease;
            z-index: 1;
        }
        .hero-inner {
            max-width: 1100px; margin: 0 auto; width: 100%;
            display: flex; align-items: center; justify-content: space-between; gap: 3rem;
            position: relative; z-index: 2;
        }
        .hero-left { flex: 1; }
        .hero-right {
            display: flex; flex-direction: column; align-items: center; gap: 1rem;
        }

        /* Terminal prompt */
        .hero-terminal {
            font-family: var(--mono);
            font-size: 0.72rem;
            color: var(--sf-blue);
            margin-bottom: 1.5rem;
            display: flex; align-items: center; gap: 0.5rem;
        }
        .terminal-prompt { color: var(--sf-green); }
        .cursor-blink {
            display: inline-block; width: 8px; height: 16px;
            background: var(--sf-blue);
            animation: blink 1s step-end infinite;
            vertical-align: text-bottom;
        }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        .hero-name {
            font-family: var(--heading);
            font-size: clamp(3.5rem, 7.5vw, 6.5rem);
            font-weight: 700;
            line-height: 0.95;
            letter-spacing: -0.04em;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            transition: color 0.4s ease;
        }
        .hero-name .accent { color: var(--sf-blue); }
        .hero-tagline {
            font-family: var(--heading);
            font-size: clamp(1rem, 2vw, 1.3rem);
            font-weight: 400;
            color: var(--text-tertiary);
            margin-bottom: 1.5rem;
            letter-spacing: -0.01em;
            transition: color 0.4s ease;
        }
        .hero-subtitle {
            font-size: 0.92rem;
            line-height: 1.8;
            color: var(--text-secondary);
            max-width: 520px;
            margin-bottom: 2.5rem;
            transition: color 0.4s ease;
        }
        .hero-actions { display: flex; gap: 0.75rem; flex-wrap: wrap; }
        .btn {
            display: inline-flex; align-items: center; gap: 0.5rem;
            padding: 0.7rem 1.5rem; border-radius: 8px;
            font-family: var(--mono); font-size: 0.75rem; font-weight: 600;
            text-decoration: none; transition: all 0.25s ease;
            cursor: pointer; letter-spacing: 0.02em;
        }
        .btn-primary {
            background: var(--sf-blue); color: #FFFFFF; border: none;
            box-shadow: 0 2px 8px rgba(1,118,211,0.25);
        }
        .btn-primary:hover { box-shadow: 0 4px 20px rgba(1,118,211,0.35); transform: translateY(-2px); }
        .btn-outline {
            background: transparent; color: var(--sf-blue);
            border: 1.5px solid var(--border);
        }
        .btn-outline:hover { border-color: var(--sf-blue); background: rgba(1,118,211,0.04); }

        /* Profile photo */
        .profile-photo {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center 25%;
            transform: scale(1.3);
            transform-origin: center 25%;
        }
        .profile-photo-container {
            position: relative;
            width: 550px;
            height: 550px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: visible;
        }
        .photo-bg-3d {
            position: absolute;
            top: -45%;
            left: -39%;
            width: 200%;
            height: 200%;
            z-index: 0;
        }
        .photo-bg-3d iframe {
            display: block;
            width: 100%;
            height: 100%;
            border: none;
        }
        .photo-scroll-guard {
            position: absolute;
            top: -45%;
            left: -39%;
            width: 200%;
            height: 200%;
            z-index: 3;
            background: transparent;
            pointer-events: auto;
        }
        .profile-photo-wrapper {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            overflow: hidden;
            border: 3px solid var(--border);
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
        }
        .profile-photo-wrapper:hover { border-color: var(--sf-blue); box-shadow: var(--shadow-lg); }

        /* --- BLUEPRINT CONNECTOR --- */
        .blueprint-connector {
            display: flex; align-items: center; justify-content: center;
            padding: 2rem 0; position: relative; z-index: 1;
            background: var(--bg-primary);
            transition: background 0.5s ease;
        }
        .connector-line {
            display: flex; align-items: center; gap: 0.75rem;
            color: var(--text-muted); font-family: var(--mono); font-size: 0.6rem;
            letter-spacing: 0.1em; text-transform: uppercase;
        }
        .connector-dash {
            width: 60px; height: 1px;
            border-top: 2px dashed var(--border);
            transition: border-color 0.4s ease;
        }
        .connector-node {
            width: 8px; height: 8px; border-radius: 50%;
            border: 2px solid var(--sf-blue);
            background: var(--bg-primary);
            transition: background 0.4s ease;
        }

        /* --- SECTIONS --- */
        section {
            padding: 5rem 2rem;
            position: relative; z-index: 1;
            transition: background 0.5s ease;
        }
        .section-inner { max-width: 1100px; margin: 0 auto; }
        .section-label {
            font-family: var(--mono);
            font-size: 0.65rem; font-weight: 600;
            letter-spacing: 0.18em; text-transform: uppercase;
            color: var(--sf-blue); margin-bottom: 0.5rem;
        }
        .section-title {
            font-family: var(--heading);
            font-size: 1.75rem; font-weight: 700;
            color: var(--text-primary); margin-bottom: 0.75rem;
            letter-spacing: -0.03em;
            transition: color 0.4s ease;
        }
        .section-desc {
            color: var(--text-tertiary);
            max-width: 500px; font-size: 0.9rem; line-height: 1.7;
            margin-bottom: 3rem;
            transition: color 0.4s ease;
        }

        /* --- STATS --- */
        .stats-grid {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 1.25rem;
        }
        .stat-card {
            background: var(--card-bg); border: 1px solid var(--border);
            border-radius: var(--radius); padding: 1.5rem; text-align: center;
            transition: all 0.3s ease; box-shadow: var(--shadow-card);
            perspective: 600px;
        }
        .stat-value {
            font-family: var(--heading);
            font-size: 2.2rem; font-weight: 700;
            color: var(--sf-blue); margin-bottom: 0.4rem;
            letter-spacing: -0.03em;
        }
        .stat-label {
            font-family: var(--mono);
            font-size: 0.58rem; font-weight: 500;
            letter-spacing: 0.08em; text-transform: uppercase;
            color: var(--text-muted);
        }

        /* --- ABOUT --- */
        .about-text {
            font-size: 1rem; line-height: 1.9;
            color: var(--text-secondary); max-width: 700px;
            margin-bottom: 1.25rem;
            transition: color 0.4s ease;
        }
        .about-personal {
            font-size: 0.85rem; line-height: 1.7;
            color: var(--text-muted); max-width: 700px;
            font-style: italic;
            transition: color 0.4s ease;
        }

        /* --- TIMELINE (WORKFLOW STYLE) --- */
        .timeline { position: relative; padding-left: 2.5rem; }
        .timeline::before {
            content: ''; position: absolute;
            left: 7px; top: 0; bottom: 0; width: 2px;
            background: var(--border);
            transition: background 0.4s ease;
        }

        /* Flowing dots */
        .timeline::after {
            content: ''; position: absolute;
            left: 5px; width: 6px; height: 6px;
            border-radius: 50%; background: var(--sf-blue);
            animation: flowDown 4s ease-in-out infinite;
            opacity: 0.6;
        }
        @keyframes flowDown {
            0% { top: 0; opacity: 0; }
            10% { opacity: 0.7; }
            90% { opacity: 0.7; }
            100% { top: 100%; opacity: 0; }
        }

        .timeline-item { position: relative; padding-bottom: 3rem; }
        .timeline-item:last-child { padding-bottom: 0; }

        /* Workflow status dot */
        .timeline-dot {
            position: absolute; left: -2rem; top: 4px;
            width: 16px; height: 16px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
        }
        .timeline-dot.active {
            background: rgba(1, 118, 211, 0.15);
            border: 2px solid var(--sf-blue);
        }
        .timeline-dot.active::after {
            content: ''; width: 6px; height: 6px;
            border-radius: 50%; background: var(--sf-blue);
            animation: pulse 2s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.4); }
        }
        .timeline-dot.completed {
            background: var(--sf-green); border: none;
        }
        .timeline-dot.completed::after {
            content: '✓'; color: #FFFFFF;
            font-size: 0.55rem; font-weight: 700;
        }

        .timeline-header {
            display: flex; align-items: baseline; gap: 0.75rem;
            flex-wrap: wrap; margin-bottom: 0.2rem;
        }
        .timeline-company {
            font-family: var(--heading);
            font-size: 1.1rem; font-weight: 700;
            color: var(--text-primary);
            transition: color 0.4s ease;
        }
        .timeline-badge {
            font-family: var(--mono);
            font-size: 0.55rem; font-weight: 600;
            letter-spacing: 0.06em; text-transform: uppercase;
            padding: 0.15rem 0.5rem; border-radius: 4px;
            background: rgba(1, 118, 211, 0.08); color: var(--sf-blue);
        }
        .workflow-status {
            font-family: var(--mono); font-size: 0.55rem;
            font-weight: 600; letter-spacing: 0.05em;
            text-transform: uppercase; margin-left: auto;
        }
        .workflow-status.running { color: var(--sf-blue); }
        .workflow-status.done { color: var(--sf-green); }
        .timeline-role {
            font-family: var(--mono); font-size: 0.75rem;
            font-weight: 500; color: var(--text-muted); margin-bottom: 0.75rem;
        }
        .timeline-bullets { list-style: none; padding: 0; }
        .timeline-bullets li {
            position: relative; padding-left: 1.2rem; margin-bottom: 0.45rem;
            font-size: 0.85rem; color: var(--text-secondary); line-height: 1.65;
            transition: color 0.4s ease;
        }
        .timeline-bullets li::before {
            content: ''; position: absolute; left: 0; top: 0.55em;
            width: 5px; height: 5px; border-radius: 50%; background: var(--border);
        }
        .timeline-bullets li strong { color: var(--text-primary); font-weight: 600; }

        /* --- AGENT NODE CARDS --- */
        .agent-grid {
            display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.25rem;
            position: relative;
        }
        .agent-card {
            background: var(--card-bg); border: 1px solid var(--border);
            border-radius: var(--radius); padding: 1.75rem;
            transition: all 0.3s ease; box-shadow: var(--shadow-card);
            position: relative;
            perspective: 600px;
        }
        .agent-card::before {
            content: '';
            position: absolute; top: 50%; left: -12px;
            width: 8px; height: 8px; border-radius: 50%;
            border: 2px solid var(--sf-blue);
            background: var(--bg-primary);
            transition: background 0.4s ease;
        }
        .agent-card::after {
            content: '';
            position: absolute; top: 50%; right: -12px;
            width: 8px; height: 8px; border-radius: 50%;
            border: 2px solid var(--border);
            background: var(--bg-primary);
            transition: background 0.4s, border-color 0.4s;
        }
        .agent-card-inner { transition: transform 0.15s ease-out; }
        .agent-icon {
            width: 36px; height: 36px; border-radius: 8px;
            background: rgba(1, 118, 211, 0.08);
            display: flex; align-items: center; justify-content: center;
            color: var(--sf-blue); font-size: 0.85rem; margin-bottom: 1rem;
        }
        .agent-card h3 {
            font-family: var(--heading);
            font-size: 0.9rem; font-weight: 600;
            color: var(--text-primary); margin-bottom: 0.4rem;
            transition: color 0.4s ease;
        }
        .agent-card p {
            font-size: 0.8rem; color: var(--text-tertiary);
            line-height: 1.6;
            transition: color 0.4s ease;
        }
        .agent-type {
            font-family: var(--mono); font-size: 0.55rem;
            color: var(--sf-blue); letter-spacing: 0.06em;
            text-transform: uppercase; margin-bottom: 0.75rem;
        }
        .learning-card { border-left: 3px solid var(--sf-blue); margin-top: 1.25rem; }

        /* --- SKILLS --- */
        .skills-list { max-width: 580px; }
        .skill-row {
            display: flex; align-items: center; gap: 1rem;
            margin-bottom: 1rem;
        }
        .skill-name {
            font-family: var(--mono); font-size: 0.72rem; font-weight: 500;
            color: var(--text-secondary); min-width: 200px;
            transition: color 0.4s ease;
        }
        .skill-bar-bg {
            flex: 1; height: 5px; background: var(--border);
            border-radius: 3px; overflow: hidden;
            transition: background 0.4s ease;
        }
        .skill-bar-fill {
            height: 100%; border-radius: 3px;
            background: linear-gradient(90deg, var(--sf-blue), var(--sf-blue-light));
            width: 0%;
            transition: width 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .skill-pct {
            font-family: var(--mono); font-size: 0.65rem; font-weight: 600;
            color: var(--text-muted); min-width: 34px; text-align: right;
        }

        /* --- EDUCATION --- */
        .edu-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.25rem; }
        .edu-card {
            background: var(--card-bg); border: 1px solid var(--border);
            border-radius: var(--radius); padding: 1.75rem;
            transition: all 0.3s ease; box-shadow: var(--shadow-card);
            perspective: 600px;
        }
        .edu-card-inner { transition: transform 0.15s ease-out; }
        .edu-card h3 {
            font-family: var(--heading);
            font-size: 0.95rem; font-weight: 600;
            color: var(--text-primary); margin-bottom: 0.3rem;
        }
        .edu-school { font-size: 0.82rem; color: var(--sf-blue); font-weight: 500; margin-bottom: 0.3rem; }
        .edu-year {
            font-family: var(--mono); font-size: 0.68rem;
            color: var(--text-muted); margin-bottom: 0.65rem;
        }
        .edu-detail {
            font-size: 0.78rem; color: var(--text-tertiary);
            line-height: 1.6; list-style: none; padding: 0;
        }
        .edu-detail li { margin-bottom: 0.2rem; }

        /* --- HOBBIES --- */
        .hobbies-grid { display: flex; flex-wrap: wrap; gap: 0.6rem; }
        .hobby-tag {
            display: inline-flex; align-items: center; gap: 0.35rem;
            padding: 0.45rem 0.9rem;
            background: var(--card-bg); border: 1px solid var(--border);
            border-radius: 100px;
            font-size: 0.78rem; color: var(--text-secondary); font-weight: 500;
            transition: all 0.25s ease; cursor: default;
        }
        .hobby-tag:hover { border-color: var(--sf-blue); color: var(--sf-blue); }
        .hobby-tag-secret { cursor: pointer; }
        .hobby-tag-secret:hover { border-color: var(--sf-blue); color: var(--sf-blue); }

        /* --- BOOK CHAT AGENT --- */
        .book-chat {
            position: fixed; bottom: 1.5rem; right: 1.5rem;
            width: 380px; height: 520px; max-height: calc(100vh - 3rem);
            border-radius: 16px; z-index: 999; overflow: hidden;
            display: flex; flex-direction: column;
            background: var(--bg-primary); border: 1px solid var(--border);
            box-shadow: 0 12px 48px rgba(0,0,0,0.18), 0 4px 12px rgba(0,0,0,0.08);
            transform: translateY(20px) scale(0.96); opacity: 0; pointer-events: none;
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s ease;
        }
        .book-chat.open { transform: translateY(0) scale(1); opacity: 1; pointer-events: all; }
        .book-chat-header {
            display: flex; align-items: center; gap: 10px;
            padding: 14px 16px; flex-shrink: 0;
            background: linear-gradient(135deg, var(--sf-blue), var(--sf-blue-dark));
            color: #FFF;
        }
        .book-chat-avatar {
            width: 34px; height: 34px; border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex; align-items: center; justify-content: center;
            font-size: 0.9rem; flex-shrink: 0;
        }
        .book-chat-header-info { flex: 1; }
        .book-chat-header-name {
            font-family: var(--heading); font-size: 0.88rem;
            font-weight: 600; letter-spacing: -0.01em;
        }
        .book-chat-header-status {
            font-family: var(--mono); font-size: 0.6rem;
            opacity: 0.8; letter-spacing: 0.03em;
        }
        .book-chat-close {
            background: rgba(255,255,255,0.15); border: none; color: #FFF;
            width: 28px; height: 28px; border-radius: 50%; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.75rem; transition: background 0.2s; flex-shrink: 0;
        }
        .book-chat-close:hover { background: rgba(255,255,255,0.25); }
        .book-chat-messages {
            flex: 1; overflow-y: auto; padding: 16px;
            display: flex; flex-direction: column; gap: 10px;
        }
        .book-chat-messages::-webkit-scrollbar { width: 4px; }
        .book-chat-messages::-webkit-scrollbar-track { background: transparent; }
        .book-chat-messages::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
        .chat-row {
            display: flex; gap: 8px; align-items: flex-end; max-width: 88%;
            opacity: 0; transform: translateY(8px);
            animation: chatIn 0.3s ease forwards;
        }
        .chat-row.agent { align-self: flex-start; }
        .chat-row.user { align-self: flex-end; flex-direction: row-reverse; }
        @keyframes chatIn { to { opacity: 1; transform: translateY(0); } }
        .chat-av {
            width: 26px; height: 26px; border-radius: 50%;
            background: rgba(1,118,211,0.1);
            display: flex; align-items: center; justify-content: center;
            font-size: 0.65rem; flex-shrink: 0; color: var(--sf-blue);
        }
        .chat-row.user .chat-av { display: none; }
        .chat-bubble {
            padding: 10px 14px; border-radius: 16px;
            font-size: 0.82rem; line-height: 1.55; word-wrap: break-word;
        }
        .chat-row.agent .chat-bubble {
            background: var(--bg-tertiary); color: var(--text-primary);
            border-bottom-left-radius: 4px;
        }
        .chat-row.user .chat-bubble {
            background: var(--sf-blue); color: #FFF;
            border-bottom-right-radius: 4px;
        }
        .chat-typing {
            display: flex; gap: 8px; align-items: flex-end;
            align-self: flex-start; max-width: 88%;
            opacity: 0; transform: translateY(8px);
            animation: chatIn 0.3s ease forwards;
        }
        .typing-dots {
            display: flex; gap: 4px; padding: 12px 16px;
            background: var(--bg-tertiary); border-radius: 16px;
            border-bottom-left-radius: 4px;
        }
        .typing-dots span {
            width: 7px; height: 7px; border-radius: 50%;
            background: var(--text-muted);
            animation: dotBounce 1.4s ease-in-out infinite;
        }
        .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
        .typing-dots span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes dotBounce {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
            30% { transform: translateY(-6px); opacity: 1; }
        }
        .book-card-chat {
            background: var(--card-bg); border: 1px solid var(--border);
            border-radius: 12px; overflow: hidden;
            box-shadow: var(--shadow-sm); max-width: 260px;
        }
        .book-card-accent { height: 4px; width: 100%; }
        .book-card-body { padding: 14px; }
        .book-card-title {
            font-family: var(--heading); font-size: 0.9rem; font-weight: 600;
            color: var(--text-primary); margin-bottom: 2px; letter-spacing: -0.01em;
        }
        .book-card-author {
            font-family: var(--mono); font-size: 0.6rem; color: var(--sf-blue);
            letter-spacing: 0.04em; margin-bottom: 10px; text-transform: uppercase;
        }
        .book-card-note {
            font-size: 0.78rem; color: var(--text-secondary);
            line-height: 1.65; font-style: italic;
        }
        .book-card-note::before { content: '\201C'; color: var(--sf-blue); font-weight: 600; }
        .book-card-note::after { content: '\201D'; color: var(--sf-blue); font-weight: 600; }
        .book-chat-footer {
            padding: 12px 16px; border-top: 1px solid var(--border); flex-shrink: 0;
        }
        .book-chat-btn {
            width: 100%; padding: 10px; border-radius: 10px; border: none;
            background: var(--sf-blue); color: #FFF;
            font-family: var(--mono); font-size: 0.75rem; font-weight: 600;
            letter-spacing: 0.02em; cursor: pointer; transition: all 0.2s;
        }
        .book-chat-btn:hover {
            background: var(--sf-blue-light); transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(1,118,211,0.3);
        }
        .book-chat-btn:disabled {
            opacity: 0.5; cursor: not-allowed; transform: none; box-shadow: none;
        }
        .chat-row.faded { opacity: 0.4; transition: opacity 0.4s; }
        .chat-row.faded:hover, .chat-typing.faded:hover { opacity: 1; }

        /* --- SIDE DOTS --- */
        .side-dots {
            position: fixed; right: 1.25rem; top: 50%;
            transform: translateY(-50%); z-index: 90;
            display: flex; flex-direction: column; gap: 10px;
        }
        .side-dot {
            width: 8px; height: 8px; border-radius: 50%;
            background: var(--dot-inactive);
            cursor: pointer; transition: all 0.3s ease;
            border: none; padding: 0; position: relative;
        }
        .side-dot.active {
            background: var(--dot-active);
            box-shadow: 0 0 0 3px rgba(1, 118, 211, 0.15);
        }
        .side-dot-label {
            position: absolute; right: 18px; top: 50%;
            transform: translateY(-50%);
            font-family: var(--mono); font-size: 0.58rem; font-weight: 500;
            color: var(--text-muted); white-space: nowrap;
            opacity: 0; pointer-events: none; transition: opacity 0.2s;
        }
        .side-dot:hover .side-dot-label { opacity: 1; }

        /* --- FOOTER --- */
        footer {
            background: var(--footer-bg); color: #FFFFFF;
            padding: 4rem 2rem; text-align: center;
            transition: background 0.5s ease; position: relative; z-index: 1;
        }
        .footer-inner { max-width: 1100px; margin: 0 auto; }
        footer h2 {
            font-family: var(--heading);
            font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;
            letter-spacing: -0.02em;
        }
        .footer-sub {
            color: var(--footer-text); font-size: 0.85rem;
            margin-bottom: 2rem;
            transition: color 0.4s ease;
        }
        .social-links {
            display: flex; justify-content: center; gap: 0.75rem; margin-bottom: 2.5rem;
        }
        .social-links a {
            width: 40px; height: 40px; border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.1);
            display: flex; align-items: center; justify-content: center;
            color: var(--footer-text); text-decoration: none;
            transition: all 0.25s ease; font-size: 0.9rem;
        }
        .social-links a:hover { color: #FFFFFF; border-color: var(--sf-blue); background: var(--sf-blue); }
        .footer-meta {
            font-family: var(--mono); font-size: 0.6rem;
            letter-spacing: 0.1em; text-transform: uppercase;
            color: rgba(255,255,255,0.18);
        }

        /* --- RESPONSIVE --- */
        @media (max-width: 768px) {
            .nav-links { display: none; }
            .mobile-toggle { display: block; }
            .nav-links.open {
                display: flex; flex-direction: column;
                position: absolute; top: 60px; left: 0; width: 100%;
                background: var(--nav-bg); backdrop-filter: blur(16px);
                padding: 1.5rem 2rem;
                border-bottom: 1px solid var(--border); gap: 1rem;
            }
            .hero { padding: 8rem 1.5rem 4rem; min-height: auto; }
            .hero-inner { flex-direction: column; text-align: center; }
            .hero-subtitle { max-width: 100%; }
            .hero-actions { justify-content: center; }
            .hero-terminal { justify-content: center; }
            .hero-name { font-size: clamp(2.8rem, 12vw, 4rem); }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            .agent-grid { grid-template-columns: 1fr; }
            .agent-card::before, .agent-card::after { display: none; }
            .edu-grid { grid-template-columns: 1fr; }
            .side-dots { display: none; }
            .skill-name { min-width: 140px; font-size: 0.65rem; }
            .book-chat {
                bottom: 0; right: 0; width: 100%;
                height: 75vh; max-height: 75vh;
                border-radius: 16px 16px 0 0;
            }
        }
    </style>
</head>
<body>

    <!-- Animated node network background -->
    <canvas id="nodeCanvas"></canvas>

    <!-- Scroll progress -->
    <div class="scroll-progress" id="scrollProgress"></div>

    <!-- Nav -->
    <nav id="navbar">
        <div class="nav-inner">
            <span class="nav-logo">fernando.garcia</span>
            <button class="mobile-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Toggle menu">
                <i class="fas fa-bars"></i>
            </button>
            <div class="nav-right">
                <div class="nav-links">
                    <a href="#about">about</a>
                    <a href="#experience">experience</a>
                    <a href="#agents">competencies</a>
                    <a href="#skills">skills</a>
                    <a href="#education">education</a>
                    <a href="#contact">contact</a>
                </div>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                    <i class="fas fa-sun"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Side dots -->
    <div class="side-dots" id="sideDots">
        <button class="side-dot active" data-target="hero"><span class="side-dot-label">Top</span></button>
        <button class="side-dot" data-target="about"><span class="side-dot-label">About</span></button>
        <button class="side-dot" data-target="experience"><span class="side-dot-label">Experience</span></button>
        <button class="side-dot" data-target="agents"><span class="side-dot-label">Competencies</span></button>
        <button class="side-dot" data-target="skills"><span class="side-dot-label">Skills</span></button>
        <button class="side-dot" data-target="education"><span class="side-dot-label">Education</span></button>
        <button class="side-dot" data-target="contact"><span class="side-dot-label">Contact</span></button>
    </div>

    <!-- HERO -->
    <header class="hero" id="hero">
        <div class="hero-inner" id="heroContent">
            <div class="hero-left">
                <div class="hero-terminal">
                    <span class="terminal-prompt">~/solutions $</span>
                    <span>run workflow --agent fernando.garcia</span>
                    <span class="cursor-blink"></span>
                </div>
                <h1 class="hero-name">
                    FERNANDO<br><span class="accent">GARCÍA</span>
                </h1>
                <p class="hero-tagline">Architecting the Future of Agentic Processes</p>
                <p class="hero-subtitle">
                    Engineer with a Master's in Business Intelligence and a builder's mindset — translating high-stakes industrial workflows into resilient, no-code AI solutions that drive operational performance.
                </p>
                <div class="hero-actions">
                    <a href="#experience" class="btn btn-primary">
                        <i class="fas fa-play" style="font-size: 0.6rem;"></i> View My Impact
                    </a>
                    <a href="https://www.linkedin.com/in/fernandogarciagzz/" target="_blank" class="btn btn-outline">
                        <i class="fab fa-linkedin"></i> LinkedIn
                    </a>
                </div>
            </div>
            <div class="hero-right">
                <div class="profile-photo-container" id="photoContainer">
                    <div class="photo-bg-3d">
                        <iframe id="splineFrame" src="https://my.spline.design/pandemoniumchaosartwork-KjSeQ5Fwh0tOJv1twUQFefWC/?v=3" frameborder="0" loading="lazy" title="3D Background"></iframe>
                    </div>
                    <div class="photo-scroll-guard" id="scrollGuard"></div>
                    <div class="profile-photo-wrapper">
                        <img src="photo.png" alt="Fernando García" class="profile-photo">
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Connector -->
    <div class="blueprint-connector">
        <div class="connector-line">
            <div class="connector-dash"></div>
            <div class="connector-node"></div>
            <span>metrics</span>
            <div class="connector-node"></div>
            <div class="connector-dash"></div>
        </div>
    </div>

    <!-- Stats -->
    <section class="bg-primary" style="padding: 2rem 2rem 3.5rem;">
        <div class="section-inner">
            <div class="stats-grid">
                <div class="stat-card magnetic reveal">
                    <div class="stat-value" data-count="1.5" data-suffix="+" data-decimal="true">0+</div>
                    <div class="stat-label">Years Agentic Orchestration</div>
                </div>
                <div class="stat-card magnetic reveal reveal-d1">
                    <div class="stat-value" data-static="true">M.S.</div>
                    <div class="stat-label">Business Intelligence</div>
                </div>
                <div class="stat-card magnetic reveal reveal-d2">
                    <div class="stat-value" data-count="20" data-suffix="%">0%</div>
                    <div class="stat-label">Working Capital Reduction Across Supply Chain</div>
                </div>
                <div class="stat-card magnetic reveal reveal-d3">
                    <div class="stat-value" data-static="true">2nd</div>
                    <div class="stat-label">CLAUT Innovation Award</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Connector -->
    <div class="blueprint-connector">
        <div class="connector-line">
            <div class="connector-dash"></div>
            <div class="connector-node"></div>
            <span>about</span>
            <div class="connector-node"></div>
            <div class="connector-dash"></div>
        </div>
    </div>

    <!-- About -->
    <section id="about" class="bg-primary">
        <div class="section-inner">
            <p class="section-label reveal">// about</p>
            <h2 class="section-title reveal">The "Why" Behind the Solutions</h2>
            <p class="about-text reveal">
                Engineer with a structured mindset and a Master's in Business Intelligence, passionate about understanding the "why" behind complex problems to turn them into scalable solutions. As a Quality Engineer at Salesforce, I specialize in the Agentforce (formerly Regrello) platform, architecting agentic workflows including different agents to help manufacturing teams work smarter. I bring a proven track record in supply chain optimization, notably reducing working capital by 20% at a global automotive leader by identifying inefficiencies and designing high-impact industrial processes. I leverage a "builder's mindset" to translate high-stakes industrial workflows into resilient, no-code AI solutions that drive operational performance.
            </p>
            <p class="about-personal reveal">
                Outside of my professional focus on strategic data analysis and process automation, I am committed to continuous learning and maintaining a disciplined lifestyle through exercise, reading, and mindfulness.
            </p>
        </div>
    </section>

    <!-- Connector -->
    <div class="blueprint-connector">
        <div class="connector-line">
            <div class="connector-dash"></div>
            <div class="connector-node"></div>
            <span>workflow log</span>
            <div class="connector-node"></div>
            <div class="connector-dash"></div>
        </div>
    </div>

    <!-- Experience -->
    <section id="experience" class="bg-primary">
        <div class="section-inner">
            <p class="section-label reveal">// experience</p>
            <h2 class="section-title reveal">Professional Journey</h2>
            <p class="section-desc reveal">From engineering internships to building agentic AI systems at Salesforce.</p>

            <div class="timeline">
                <div class="timeline-item reveal">
                    <div class="timeline-dot active"></div>
                    <div class="timeline-header">
                        <span class="timeline-company">Salesforce</span>
                        <span class="timeline-badge">Current</span>
                        <span class="workflow-status running">● Running</span>
                    </div>
                    <p class="timeline-role">Quality Engineer · Nov 2025 – Present</p>
                    <ul class="timeline-bullets">
                        <li><strong>Agentic Orchestration:</strong> Engineered a high-complexity "Master Blueprint" that orchestrates child workflows to automate daily efficiency tracking of the full Agentforce suite.</li>
                        <li><strong>Automation Leadership:</strong> Developed "Lemurized" (automated) blueprint cycles to monitor agent performance over time, validating the speed and accuracy of agentic interactions.</li>
                        <li><strong>Cross-Functional Feedback:</strong> Collaborates directly with Product and Engineering teams to refine agent capabilities and identify logic gaps in new releases.</li>
                        <li><strong>Strategic Testing:</strong> Leverages deep supply chain knowledge to create "out-of-the-box" test scenarios that mirror complex industrial environments, increasing platform robustness.</li>
                    </ul>
                </div>

                <div class="timeline-item reveal">
                    <div class="timeline-dot completed"></div>
                    <div class="timeline-header">
                        <span class="timeline-company">Regrello</span>
                        <span class="timeline-badge">Acquired by Salesforce</span>
                        <span class="workflow-status done">✓ Completed</span>
                    </div>
                    <p class="timeline-role">Industry Analyst · Oct 2024 – Oct 2025</p>
                    <ul class="timeline-bullets">
                        <li><strong>Solution Design:</strong> Designed and tested intelligent blueprints with task logic, field mappings, and conditions for supply chain and finance workflows.</li>
                        <li><strong>AI Refinement:</strong> Refined prompts and improved AI-generated task responses to ensure accuracy and consistency across agent outputs.</li>
                        <li><strong>Quality Assurance:</strong> Led "Golden Tests" and quality assurance simulations to detect bugs and workflow inconsistencies before production deployments.</li>
                        <li><strong>BI Reporting:</strong> Created operational dashboards and KPI reports by analyzing platform data using Google Looker Studio.</li>
                    </ul>
                </div>

                <div class="timeline-item reveal">
                    <div class="timeline-dot completed"></div>
                    <div class="timeline-header">
                        <span class="timeline-company">Metalsa</span>
                        <span class="timeline-badge">Toyota Program</span>
                        <span class="workflow-status done">✓ Completed</span>
                    </div>
                    <p class="timeline-role">Demand Planning Specialist · 2022 – Oct 2024</p>
                    <ul class="timeline-bullets">
                        <li><strong>Financial Impact:</strong> Partnered with the Supply Chain Director to optimize demand planning, successfully reducing working capital by over 20% through historical forecast analysis.</li>
                        <li><strong>Award-Winning Innovation:</strong> Awarded 2nd Place in the Automotive Cluster (CLAUT) Innovation Contest for excellence in supply chain improvement.</li>
                        <li><strong>Strategic Visualization:</strong> Designed a custom S&OP Dashboard from scratch in Power BI, used by Plant Managers and Directors to track production and inventory levels for global platforms (Tacoma, Tundra).</li>
                        <li><strong>ERP Management:</strong> Managed sales forecasts and inventory plans within the QAD ERP system.</li>
                    </ul>
                </div>

                <div class="timeline-item reveal">
                    <div class="timeline-dot completed"></div>
                    <div class="timeline-header">
                        <span class="timeline-company">Metalsa</span>
                        <span class="workflow-status done">✓ Completed</span>
                    </div>
                    <p class="timeline-role">Logistics Specialist · 2021 – 2022</p>
                    <ul class="timeline-bullets">
                        <li><strong>Supply Chain Resilience:</strong> Managed logistics for local and imported components, ensuring timely delivery to production lines.</li>
                    </ul>
                </div>

                <div class="timeline-item reveal">
                    <div class="timeline-dot completed"></div>
                    <div class="timeline-header">
                        <span class="timeline-company">Metalsa</span>
                        <span class="timeline-badge">Stellantis Project</span>
                        <span class="workflow-status done">✓ Completed</span>
                    </div>
                    <p class="timeline-role">Production Control Intern · 2021</p>
                    <ul class="timeline-bullets">
                        <li><strong>Demand Analysis:</strong> Supported MPS planning and demand analysis for major automotive production projects.</li>
                    </ul>
                </div>

                <div class="timeline-item reveal">
                    <div class="timeline-dot completed"></div>
                    <div class="timeline-header">
                        <span class="timeline-company">John Deere</span>
                        <span class="workflow-status done">✓ Completed</span>
                    </div>
                    <p class="timeline-role">Design Engineering Intern · 2020</p>
                    <ul class="timeline-bullets">
                        <li><strong>Engineering Simulation:</strong> Performed Finite Element Analysis (FEA) and topological optimization for industrial designs.</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Connector -->
    <div class="blueprint-connector">
        <div class="connector-line">
            <div class="connector-dash"></div>
            <div class="connector-node"></div>
            <span>agent registry</span>
            <div class="connector-node"></div>
            <div class="connector-dash"></div>
        </div>
    </div>

    <!-- Core Competencies (Agent Nodes) -->
    <section id="agents" class="bg-primary">
        <div class="section-inner">
            <p class="section-label reveal">// competencies</p>
            <h2 class="section-title reveal">Core Competencies</h2>
            <p class="section-desc reveal">The capabilities I bring to every solution I build.</p>

            <div class="agent-grid">
                <div class="agent-card magnetic reveal">
                    <div class="agent-card-inner">
                        <div class="agent-type">agent::product</div>
                        <div class="agent-icon"><i class="fas fa-robot"></i></div>
                        <h3>Product & Solutions</h3>
                        <p>Agentic Orchestration, No-Code Workflow Design, Quality Assurance</p>
                    </div>
                </div>
                <div class="agent-card magnetic reveal reveal-d1">
                    <div class="agent-card-inner">
                        <div class="agent-type">agent::automation</div>
                        <div class="agent-icon"><i class="fas fa-wand-magic-sparkles"></i></div>
                        <h3>AI & Automation</h3>
                        <p>Generative AI (GPT/Gemini), Agentic Testing & Automation, Prompt Engineering</p>
                    </div>
                </div>
                <div class="agent-card magnetic reveal reveal-d2">
                    <div class="agent-card-inner">
                        <div class="agent-type">agent::analytics</div>
                        <div class="agent-icon"><i class="fas fa-chart-line"></i></div>
                        <h3>Business Intelligence</h3>
                        <p>Power BI (Advanced), Tableau, Looker Studio, QAD ERP, Data Modeling</p>
                    </div>
                </div>
                <div class="agent-card magnetic reveal reveal-d3">
                    <div class="agent-card-inner">
                        <div class="agent-type">agent::domain</div>
                        <div class="agent-icon"><i class="fas fa-industry"></i></div>
                        <h3>Domain Expertise</h3>
                        <p>Demand Planning, Production Control, Logistics, S&OP Strategy, Automotive Supply Chain</p>
                    </div>
                </div>
            </div>

            <div class="agent-card learning-card magnetic reveal" style="margin-top: 1.25rem;">
                <div class="agent-card-inner">
                    <div class="agent-type">agent::learning // in training</div>
                    <div class="agent-icon"><i class="fas fa-code"></i></div>
                    <h3>Technical Development</h3>
                    <p>Software Development with Claude Code to deepen understanding of SaaS and bug fixing. Actively learning Python and SQL for advanced data analysis and AI/software logic comprehension.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Connector -->
    <div class="blueprint-connector">
        <div class="connector-line">
            <div class="connector-dash"></div>
            <div class="connector-node"></div>
            <span>proficiency</span>
            <div class="connector-node"></div>
            <div class="connector-dash"></div>
        </div>
    </div>

    <!-- Skills -->
    <section id="skills" class="bg-primary">
        <div class="section-inner">
            <p class="section-label reveal">// skills</p>
            <h2 class="section-title reveal">Proficiency Levels</h2>
            <p class="section-desc reveal">A transparent view of where I stand today.</p>

            <div class="skills-list" id="skillsList">
                <div class="skill-row reveal">
                    <span class="skill-name">Agentforce for Supply Chain</span>
                    <div class="skill-bar-bg"><div class="skill-bar-fill" data-width="100"></div></div>
                    <span class="skill-pct">100%</span>
                </div>
                <div class="skill-row reveal">
                    <span class="skill-name">Generative AI (GPT / Gemini)</span>
                    <div class="skill-bar-bg"><div class="skill-bar-fill" data-width="95"></div></div>
                    <span class="skill-pct">95%</span>
                </div>
                <div class="skill-row reveal">
                    <span class="skill-name">Excel</span>
                    <div class="skill-bar-bg"><div class="skill-bar-fill" data-width="95"></div></div>
                    <span class="skill-pct">95%</span>
                </div>
                <div class="skill-row reveal">
                    <span class="skill-name">Power BI</span>
                    <div class="skill-bar-bg"><div class="skill-bar-fill" data-width="90"></div></div>
                    <span class="skill-pct">90%</span>
                </div>
                <div class="skill-row reveal">
                    <span class="skill-name">Tableau</span>
                    <div class="skill-bar-bg"><div class="skill-bar-fill" data-width="80"></div></div>
                    <span class="skill-pct">80%</span>
                </div>
                <div class="skill-row reveal">
                    <span class="skill-name">Google Looker Studio</span>
                    <div class="skill-bar-bg"><div class="skill-bar-fill" data-width="75"></div></div>
                    <span class="skill-pct">75%</span>
                </div>
                <div class="skill-row reveal">
                    <span class="skill-name">Cursor AI</span>
                    <div class="skill-bar-bg"><div class="skill-bar-fill" data-width="15"></div></div>
                    <span class="skill-pct">15%</span>
                </div>
                <div class="skill-row reveal">
                    <span class="skill-name">Claude Code</span>
                    <div class="skill-bar-bg"><div class="skill-bar-fill" data-width="15"></div></div>
                    <span class="skill-pct">15%</span>
                </div>
                <div class="skill-row reveal">
                    <span class="skill-name">Python (learning)</span>
                    <div class="skill-bar-bg"><div class="skill-bar-fill" data-width="10"></div></div>
                    <span class="skill-pct">10%</span>
                </div>
                <div class="skill-row reveal">
                    <span class="skill-name">SQL (learning)</span>
                    <div class="skill-bar-bg"><div class="skill-bar-fill" data-width="10"></div></div>
                    <span class="skill-pct">10%</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Connector -->
    <div class="blueprint-connector">
        <div class="connector-line">
            <div class="connector-dash"></div>
            <div class="connector-node"></div>
            <span>credentials</span>
            <div class="connector-node"></div>
            <div class="connector-dash"></div>
        </div>
    </div>

    <!-- Education -->
    <section id="education" class="bg-primary">
        <div class="section-inner">
            <p class="section-label reveal">// education</p>
            <h2 class="section-title reveal">Academic Background</h2>
            <div class="edu-grid" style="margin-top: 2rem;">
                <div class="edu-card magnetic reveal">
                    <div class="edu-card-inner">
                        <h3>Master's in Business Intelligence</h3>
                        <p class="edu-school">University of Barcelona & OBS Business School</p>
                        <p class="edu-year">2023 – 2024</p>
                    </div>
                </div>
                <div class="edu-card magnetic reveal reveal-d1">
                    <div class="edu-card-inner">
                        <h3>B.S. in Mechanical Engineering with Management</h3>
                        <p class="edu-school">Universidad de Monterrey (UDEM)</p>
                        <p class="edu-year">2017 – 2021</p>
                        <ul class="edu-detail">
                            <li>&#8226; Academic Excellence Scholarship</li>
                            <li>&#8226; Certificates in Leadership, Spirituality & Social Justice</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Connector -->
    <div class="blueprint-connector">
        <div class="connector-line">
            <div class="connector-dash"></div>
            <div class="connector-node"></div>
            <span>idle tasks</span>
            <div class="connector-node"></div>
            <div class="connector-dash"></div>
        </div>
    </div>

    <!-- Hobbies -->
    <section class="bg-primary">
        <div class="section-inner">
            <p class="section-label reveal">// beyond_work</p>
            <h2 class="section-title reveal">Hobbies & Interests</h2>
            <div class="hobbies-grid reveal" style="margin-top: 2rem;">
                <span class="hobby-tag hobby-tag-secret" id="bookTrigger">📖 Books</span>
                <span class="hobby-tag">⚽ Soccer</span>
                <span class="hobby-tag">✈️ Travel</span>
                <span class="hobby-tag">🏃 Running</span>
                <span class="hobby-tag">🏋️ Hyrox / Gym</span>
                <span class="hobby-tag">🥩 Cooking</span>
                <span class="hobby-tag">🎾 Padel</span>
                <span class="hobby-tag">🏕️ Outdoors</span>
                <span class="hobby-tag">🤖 AI</span>
                <span class="hobby-tag">🧘 Mindfulness</span>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contact">
        <div class="footer-inner">
            <h2 class="reveal">Let's Build the Future Together</h2>
            <p class="footer-sub reveal">Currently bridging the gap between quality engineering and strategic product solutions.</p>
            <div class="social-links reveal">
                <a href="mailto:fernando.jgarciagzz@gmail.com" aria-label="Email"><i class="fas fa-envelope"></i></a>
                <a href="tel:+528120026642" aria-label="Phone"><i class="fas fa-phone"></i></a>
                <a href="https://www.linkedin.com/in/fernandogarciagzz/" target="_blank" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                <a href="https://www.salesforce.com/trailblazer/f0geoy9fs18wzcvj6f" target="_blank" aria-label="Trailhead"><i class="fas fa-cloud"></i></a>
            </div>
            <p class="footer-meta reveal">Based in Monterrey, Mexico · Working Remotely for Salesforce</p>
        </div>
    </footer>

    <script>
    (function() {

        // --- DARK MODE ---
        const toggle = document.getElementById('themeToggle');
        const icon = toggle.querySelector('i');
        var triggerConstellation = null;
        if (localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark');
            icon.className = 'fas fa-moon';
        }
        toggle.addEventListener('click', () => {
            document.body.classList.toggle('dark');
            const dark = document.body.classList.contains('dark');
            icon.className = dark ? 'fas fa-moon' : 'fas fa-sun';
            localStorage.setItem('theme', dark ? 'dark' : 'light');
            if (dark && triggerConstellation) triggerConstellation();
        });

        // --- SCROLL: NAV + PROGRESS ---
        const navbar = document.getElementById('navbar');
        const progress = document.getElementById('scrollProgress');
        window.addEventListener('scroll', () => {
            navbar.classList.toggle('scrolled', window.scrollY > 10);
            const h = document.documentElement.scrollHeight - window.innerHeight;
            progress.style.width = h > 0 ? (window.scrollY / h * 100) + '%' : '0%';
        });

        // --- PARALLAX HERO ---
        const heroContent = document.getElementById('heroContent');
        window.addEventListener('scroll', () => {
            const y = window.scrollY;
            if (y < window.innerHeight) {
                heroContent.style.transform = 'translateY(' + (y * 0.3) + 'px)';
                heroContent.style.opacity = 1 - (y / (window.innerHeight * 0.75));
            }
        });

        // --- REVEAL ON SCROLL ---
        const reveals = document.querySelectorAll('.reveal');
        const revealObs = new IntersectionObserver((entries) => {
            entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); });
        }, { threshold: 0.12, rootMargin: '0px 0px -30px 0px' });
        reveals.forEach(el => revealObs.observe(el));

        // --- COUNTER ANIMATION ---
        const stats = document.querySelectorAll('.stat-value[data-count]');
        const counterObs = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (!entry.isIntersecting || entry.target.dataset.counted) return;
                const el = entry.target;
                el.dataset.counted = 'true';
                if (el.dataset.static === 'true') return;
                const target = parseFloat(el.dataset.count);
                const suffix = el.dataset.suffix || '';
                const dec = el.dataset.decimal === 'true';
                const dur = 1400, start = performance.now();
                function tick(now) {
                    const p = Math.min((now - start) / dur, 1);
                    const ease = 1 - Math.pow(1 - p, 3);
                    el.textContent = (dec ? (target * ease).toFixed(1) : Math.round(target * ease)) + suffix;
                    if (p < 1) requestAnimationFrame(tick);
                }
                requestAnimationFrame(tick);
            });
        }, { threshold: 0.5 });
        stats.forEach(el => counterObs.observe(el));

        // --- SKILL BARS ---
        const bars = document.querySelectorAll('.skill-bar-fill');
        const barObs = new IntersectionObserver((entries) => {
            entries.forEach(e => { if (e.isIntersecting) e.target.style.width = e.target.dataset.width + '%'; });
        }, { threshold: 0.25 });
        bars.forEach(b => barObs.observe(b));

        // --- SIDE DOTS ---
        const sectionIds = ['hero','about','experience','agents','skills','education','contact'];
        const dots = document.querySelectorAll('.side-dot');
        dots.forEach(d => d.addEventListener('click', () => {
            const el = document.getElementById(d.dataset.target);
            if (el) el.scrollIntoView({ behavior: 'smooth' });
        }));
        const dotObs = new IntersectionObserver((entries) => {
            entries.forEach(e => {
                if (e.isIntersecting) {
                    dots.forEach(d => d.classList.toggle('active', d.dataset.target === e.target.id));
                }
            });
        }, { threshold: 0.25, rootMargin: '-15% 0px -55% 0px' });
        sectionIds.forEach(id => {
            const el = document.getElementById(id);
            if (el) dotObs.observe(el);
        });

        // --- MAGNETIC CARDS (3D TILT) ---
        document.querySelectorAll('.magnetic').forEach(card => {
            const inner = card.querySelector('.agent-card-inner, .edu-card-inner') || card;
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = (e.clientX - rect.left) / rect.width - 0.5;
                const y = (e.clientY - rect.top) / rect.height - 0.5;
                const rotateX = y * -12;
                const rotateY = x * 12;
                inner.style.transform = 'perspective(600px) rotateX(' + rotateX + 'deg) rotateY(' + rotateY + 'deg) scale(1.02)';
                card.style.boxShadow = '0 ' + (8 + y * 4) + 'px ' + (25 + Math.abs(x) * 10) + 'px rgba(1,118,211,' + (0.08 + Math.abs(x) * 0.04) + ')';
            });
            card.addEventListener('mouseleave', () => {
                inner.style.transform = 'perspective(600px) rotateX(0) rotateY(0) scale(1)';
                card.style.boxShadow = 'var(--shadow-card)';
            });
        });

        // --- ANIMATED NODE NETWORK BACKGROUND ---
        const canvas = document.getElementById('nodeCanvas');
        const ctx = canvas.getContext('2d');
        let w, h, nodes = [], mouse = { x: -1000, y: -1000 };
        const NODE_COUNT = 50;
        const CONNECT_DIST = 180;
        const MOUSE_DIST = 200;

        function resize() {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
        }
        resize();
        window.addEventListener('resize', resize);

        for (let i = 0; i < NODE_COUNT; i++) {
            nodes.push({
                x: Math.random() * w,
                y: Math.random() * h,
                vx: (Math.random() - 0.5) * 0.3,
                vy: (Math.random() - 0.5) * 0.3,
                r: Math.random() * 2 + 1.5
            });
        }

        window.addEventListener('mousemove', (e) => { mouse.x = e.clientX; mouse.y = e.clientY; });

        // --- CONSTELLATION EASTER EGG (Salesforce cloud on dark mode) ---
        var cloudShape = [
            {x:0.15,y:0.55},{x:0.13,y:0.48},{x:0.15,y:0.41},{x:0.21,y:0.35},{x:0.28,y:0.33},
            {x:0.32,y:0.20},{x:0.37,y:0.15},{x:0.44,y:0.14},{x:0.51,y:0.15},{x:0.56,y:0.20},
            {x:0.60,y:0.17},{x:0.70,y:0.16},{x:0.80,y:0.19},{x:0.87,y:0.26},{x:0.90,y:0.36},
            {x:0.89,y:0.46},{x:0.84,y:0.54},{x:0.76,y:0.59},{x:0.78,y:0.68},{x:0.72,y:0.72},
            {x:0.60,y:0.72},{x:0.45,y:0.72},{x:0.30,y:0.72},{x:0.20,y:0.72},{x:0.16,y:0.65}
        ];
        var cst = { phase: null, glowAlpha: 0, holdStart: 0 };

        triggerConstellation = function() {
            if (cst.phase) return;
            canvas.style.zIndex = '2';
            var used = {};
            cloudShape.forEach(function(target) {
                var best = -1, bestD = Infinity;
                for (var i = 0; i < nodes.length; i++) {
                    if (used[i]) continue;
                    var dx = nodes[i].x - target.x * w;
                    var dy = nodes[i].y - target.y * h;
                    var d = dx * dx + dy * dy;
                    if (d < bestD) { bestD = d; best = i; }
                }
                if (best >= 0) {
                    used[best] = true;
                    nodes[best].cloudTarget = target;
                    nodes[best].lerpSpeed = 0.03 + Math.random() * 0.025;
                }
            });
            cst.phase = 'forming';
            cst.glowAlpha = 0;
        };

        function drawNodes() {
            ctx.clearRect(0, 0, w, h);
            var isDark = document.body.classList.contains('dark');
            var baseAlpha = isDark ? 0.2 : 0.12;
            var lineAlpha = isDark ? 0.08 : 0.04;
            var mouseAlpha = isDark ? 0.2 : 0.1;
            var sy = window.scrollY * -0.05;

            // --- Phase management ---
            if (cst.phase === 'forming') {
                var allClose = true;
                for (var i = 0; i < nodes.length; i++) {
                    if (nodes[i].cloudTarget) {
                        var dx = nodes[i].x - nodes[i].cloudTarget.x * w;
                        var dy = nodes[i].y - nodes[i].cloudTarget.y * h;
                        if (dx * dx + dy * dy > 9) { allClose = false; break; }
                    }
                }
                cst.glowAlpha = Math.min(cst.glowAlpha + 0.015, 1);
                if (allClose) {
                    cst.phase = 'holding';
                    cst.holdStart = performance.now();
                }
            } else if (cst.phase === 'holding') {
                cst.glowAlpha = 1;
                if (performance.now() - cst.holdStart > 2000) {
                    cst.phase = 'scattering';
                    for (var i = 0; i < nodes.length; i++) {
                        if (nodes[i].cloudTarget) {
                            nodes[i].vx = (Math.random() - 0.5) * 0.5;
                            nodes[i].vy = (Math.random() - 0.5) * 0.5;
                        }
                    }
                }
            } else if (cst.phase === 'scattering') {
                cst.glowAlpha = Math.max(cst.glowAlpha - 0.015, 0);
                if (cst.glowAlpha <= 0) {
                    cst.phase = null;
                    canvas.style.zIndex = '0';
                    for (var i = 0; i < nodes.length; i++) {
                        nodes[i].cloudTarget = null;
                        nodes[i].lerpSpeed = 0;
                        nodes[i].vx = (Math.random() - 0.5) * 0.3;
                        nodes[i].vy = (Math.random() - 0.5) * 0.3;
                    }
                }
            }

            // --- Constellation backdrop + glow ---
            if (cst.glowAlpha > 0) {
                ctx.fillStyle = 'rgba(15, 23, 42, ' + (0.88 * cst.glowAlpha) + ')';
                ctx.fillRect(0, 0, w, h);
                var gx = 0.50 * w, gy = 0.44 * h;
                var gr = 0.38 * Math.min(w, h);
                var grad = ctx.createRadialGradient(gx, gy + sy, 0, gx, gy + sy, gr);
                grad.addColorStop(0, 'rgba(1, 118, 211, ' + (0.25 * cst.glowAlpha) + ')');
                grad.addColorStop(0.5, 'rgba(1, 118, 211, ' + (0.08 * cst.glowAlpha) + ')');
                grad.addColorStop(1, 'rgba(1, 118, 211, 0)');
                ctx.fillStyle = grad;
                ctx.fillRect(0, 0, w, h);
            }

            // --- Update + draw nodes ---
            for (var i = 0; i < nodes.length; i++) {
                var n = nodes[i];
                if (n.cloudTarget && (cst.phase === 'forming' || cst.phase === 'holding')) {
                    n.x += (n.cloudTarget.x * w - n.x) * n.lerpSpeed;
                    n.y += (n.cloudTarget.y * h - n.y) * n.lerpSpeed;
                    if (cst.phase === 'holding') {
                        n.x += (Math.random() - 0.5) * 0.3;
                        n.y += (Math.random() - 0.5) * 0.3;
                    }
                } else {
                    n.x += n.vx;
                    n.y += n.vy;
                }
                if (n.x < 0 || n.x > w) n.vx *= -1;
                if (n.y < 0 || n.y > h) n.vy *= -1;

                var na = baseAlpha;
                var nr = n.r;
                if (cst.glowAlpha > 0) {
                    if (n.cloudTarget) {
                        na = baseAlpha + (0.75 - baseAlpha) * cst.glowAlpha;
                        nr = n.r * (1 + cst.glowAlpha * 0.6);
                    } else {
                        na = baseAlpha * (1 - cst.glowAlpha * 0.6);
                    }
                }
                ctx.beginPath();
                ctx.arc(n.x, n.y + sy, nr, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(1, 118, 211, ' + na + ')';
                ctx.fill();
            }

            // --- Connection lines ---
            for (var i = 0; i < nodes.length; i++) {
                for (var j = i + 1; j < nodes.length; j++) {
                    var dx = nodes[i].x - nodes[j].x;
                    var dy = nodes[i].y - nodes[j].y;
                    var dist = Math.sqrt(dx * dx + dy * dy);
                    var cd = CONNECT_DIST;
                    var bothCloud = nodes[i].cloudTarget && nodes[j].cloudTarget;
                    if (bothCloud && cst.glowAlpha > 0) cd = CONNECT_DIST * (1 + 0.5 * cst.glowAlpha);
                    if (dist < cd) {
                        var la = lineAlpha;
                        if (bothCloud && cst.glowAlpha > 0) la = lineAlpha + (0.18 - lineAlpha) * cst.glowAlpha;
                        var a = (1 - dist / cd) * la;
                        ctx.beginPath();
                        ctx.moveTo(nodes[i].x, nodes[i].y + sy);
                        ctx.lineTo(nodes[j].x, nodes[j].y + sy);
                        ctx.strokeStyle = 'rgba(1, 118, 211, ' + a + ')';
                        ctx.lineWidth = (bothCloud && cst.glowAlpha > 0.5) ? 1.5 : 1;
                        ctx.stroke();
                    }
                }
                var mdx = nodes[i].x - mouse.x;
                var mdy = nodes[i].y - (mouse.y + window.scrollY * 0.05);
                var mDist = Math.sqrt(mdx * mdx + mdy * mdy);
                if (mDist < MOUSE_DIST) {
                    var a = (1 - mDist / MOUSE_DIST) * mouseAlpha;
                    ctx.beginPath();
                    ctx.moveTo(nodes[i].x, nodes[i].y + sy);
                    ctx.lineTo(mouse.x, mouse.y);
                    ctx.strokeStyle = 'rgba(1, 118, 211, ' + a + ')';
                    ctx.lineWidth = 1.5;
                    ctx.stroke();
                }
            }

            requestAnimationFrame(drawNodes);
        }
        drawNodes();

    })();
    </script>

    <!-- Book Chat Agent -->
    <div class="book-chat" id="bookChat">
        <div class="book-chat-header">
            <div class="book-chat-avatar">📚</div>
            <div class="book-chat-header-info">
                <div class="book-chat-header-name">Fercho's Book Agent</div>
                <div class="book-chat-header-status">online</div>
            </div>
            <button class="book-chat-close" id="bookChatClose">✕</button>
        </div>
        <div class="book-chat-messages" id="bookChatMessages"></div>
        <div class="book-chat-footer">
            <button class="book-chat-btn" id="bookChatBtn" style="display:none;">🔄 Another one!</button>
        </div>
    </div>

    <script>
    (function() {
        var books = [
            { title: 'The Power of Your Subconscious Mind', author: 'Joseph Murphy', gradient: 'linear-gradient(135deg, #667eea, #764ba2)', note: 'This was the first book that showed me how our inner thoughts create our reality. It taught me how to \u201Creprogram\u201D my brain to stop holding me back and start helping me grow.' },
            { title: 'The Power of Now', author: 'Eckhart Tolle', gradient: 'linear-gradient(135deg, #f59e0b, #d97706)', note: 'This book is a total life-changer and my personal favorite. It made me question everything and you can feel the truth in every single word. It helped me understand that true power comes from staying focused on the present moment.' },
            { title: 'A New Earth', author: 'Eckhart Tolle', gradient: 'linear-gradient(135deg, #10b981, #059669)', note: 'I recommend this for anyone who wants to understand their ego and find a deeper purpose. It shows how changing your mind is the first step to changing the entire world.' },
            { title: 'Secrets of the Millionaire Mind', author: 'T. Harv Eker', gradient: 'linear-gradient(135deg, #f97316, #eab308)', note: 'This book explains that wealth is a \u201Cmental game\u201D before it is a financial one. It helped me identify and fix the old, negative beliefs I had about success.' },
            { title: 'Think and Grow Rich', author: 'Napoleon Hill', gradient: 'linear-gradient(135deg, #ef4444, #be123c)', note: 'A classic that proves success is a science, not a matter of luck. It shows that if you can control your thoughts and your desire, you can achieve any goal.' },
            { title: 'The Almanack of Naval Ravikant', author: 'Eric Jorgenson', gradient: 'linear-gradient(135deg, #0ea5e9, #6366f1)', note: 'This is a modern guide on using logic and clear thinking to build a happy life. It\u2019s a great book for learning how to use your mind as a tool for wealth and peace.' },
            { title: 'Manifest', author: 'Roxie Nafousi', gradient: 'linear-gradient(135deg, #ec4899, #f43f5e)', note: 'I love this book because it turns big spiritual ideas into simple, daily steps. It\u2019s a practical manual for using your mind to attract the life you actually want.' }
        ];

        var introLines = [
            'Oh, this one is special. You\u2019re gonna love it.',
            'I\u2019ve been waiting for someone to ask about this one.',
            'Perfect timing \u2014 this is exactly what you need right now.',
            'This book literally changed my perspective.',
            'Here\u2019s one that hits different every time you read it.',
            'I keep coming back to this one. Trust me.',
            'This one stays with you long after you finish it.'
        ];

        var chatEl = document.getElementById('bookChat');
        var msgsEl = document.getElementById('bookChatMessages');
        var trigger = document.getElementById('bookTrigger');
        var closeBtn = document.getElementById('bookChatClose');
        var actionBtn = document.getElementById('bookChatBtn');
        var firstVisit = true, animating = false, count = 0;
        var sDeck = [], iDeck = [], lastBook = null;

        function shuffle(a) {
            var c = a.slice();
            for (var i = c.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var tmp = c[i]; c[i] = c[j]; c[j] = tmp;
            }
            return c;
        }
        function nextBook() {
            if (!sDeck.length) {
                sDeck = shuffle(books);
                if (lastBook && sDeck[sDeck.length - 1].title === lastBook.title) {
                    var si = Math.floor(Math.random() * (sDeck.length - 1));
                    var tmp = sDeck[sDeck.length - 1]; sDeck[sDeck.length - 1] = sDeck[si]; sDeck[si] = tmp;
                }
            }
            lastBook = sDeck[sDeck.length - 1];
            return sDeck.pop();
        }
        function nextIntro() {
            if (!iDeck.length) iDeck = shuffle(introLines);
            return iDeck.pop();
        }
        function wait(ms) { return new Promise(function(r) { setTimeout(r, ms); }); }
        function scrollDown() { msgsEl.scrollTop = msgsEl.scrollHeight; }

        function fadeOlder() {
            var rows = msgsEl.querySelectorAll('.chat-row, .chat-typing');
            if (rows.length > 8) {
                for (var i = 0; i < rows.length; i++) {
                    if (i < rows.length - 8) rows[i].classList.add('faded');
                    else rows[i].classList.remove('faded');
                }
            }
        }

        function agentMsg(text) {
            var d = document.createElement('div');
            d.className = 'chat-row agent';
            d.innerHTML = '<div class="chat-av">\uD83D\uDCDA</div><div class="chat-bubble">' + text + '</div>';
            msgsEl.appendChild(d); scrollDown();
        }
        function userMsg(text) {
            var d = document.createElement('div');
            d.className = 'chat-row user';
            d.innerHTML = '<div class="chat-bubble">' + text + '</div>';
            msgsEl.appendChild(d); scrollDown();
        }
        function showTyping() {
            var d = document.createElement('div');
            d.className = 'chat-typing';
            d.innerHTML = '<div class="chat-av">\uD83D\uDCDA</div><div class="typing-dots"><span></span><span></span><span></span></div>';
            msgsEl.appendChild(d); scrollDown();
            return d;
        }
        function hideTyping(el) { if (el && el.parentNode) el.parentNode.removeChild(el); }

        function bookCard(book) {
            var d = document.createElement('div');
            d.className = 'chat-row agent';
            d.innerHTML = '<div class="chat-av">\uD83D\uDCDA</div>' +
                '<div class="book-card-chat">' +
                '<div class="book-card-accent" style="background:' + book.gradient + '"></div>' +
                '<div class="book-card-body">' +
                '<div class="book-card-title">' + book.title + '</div>' +
                '<div class="book-card-author">by ' + book.author + '</div>' +
                '<div class="book-card-note">' + book.note + '</div>' +
                '</div></div>';
            msgsEl.appendChild(d); scrollDown();
        }

        function openChat() { chatEl.classList.add('open'); if (firstVisit) runGreeting(); }
        function closeChat() { chatEl.classList.remove('open'); }

        trigger.addEventListener('click', function() {
            chatEl.classList.contains('open') ? closeChat() : openChat();
        });
        closeBtn.addEventListener('click', closeChat);
        document.addEventListener('keydown', function(e) { if (e.key === 'Escape' && chatEl.classList.contains('open')) closeChat(); });

        async function runGreeting() {
            firstVisit = false; animating = true;
            actionBtn.style.display = 'none';

            var t = showTyping(); await wait(1000); hideTyping(t);
            agentMsg('Hey! \uD83D\uDC4B I\u2019m Fercho\u2019s Book Agent.');
            await wait(600);

            t = showTyping(); await wait(800); hideTyping(t);
            agentMsg('I have access to Fernando\u2019s personal library \u2014 want me to pick something meaningful for you?');
            await wait(800);

            userMsg('Recommend me a book \uD83D\uDCD6');
            await wait(600);

            await recommend();
            animating = false;
            actionBtn.style.display = 'block';
            actionBtn.disabled = false;
        }

        async function recommend() {
            if (count > 0 && count % books.length === 0) {
                var t = showTyping(); await wait(1200); hideTyping(t);
                agentMsg('You\u2019ve gone through my top 7! Let me revisit one\u2026');
                await wait(800);
            }

            var t = showTyping(); await wait(1000); hideTyping(t);
            agentMsg(nextIntro());
            await wait(400);

            t = showTyping(); await wait(600); hideTyping(t);
            bookCard(nextBook());
            count++;
            fadeOlder();
        }

        actionBtn.addEventListener('click', async function() {
            if (animating) return;
            animating = true; actionBtn.disabled = true;
            userMsg('Another one! \uD83D\uDD04');
            await wait(400);
            await recommend();
            animating = false; actionBtn.disabled = false;
        });

        // --- SPLINE: scroll guard with hover pass-through ---
        const scrollGuard = document.getElementById('scrollGuard');
        if (scrollGuard) {
            let hoverTimer;

            scrollGuard.addEventListener('wheel', (e) => {
                e.preventDefault();
                e.stopPropagation();
                window.scrollBy({ top: e.deltaY, behavior: 'instant' });
            }, { passive: false });

            scrollGuard.addEventListener('mousemove', () => {
                scrollGuard.style.pointerEvents = 'none';
                clearTimeout(hoverTimer);
                hoverTimer = setTimeout(() => {
                    scrollGuard.style.pointerEvents = 'auto';
                }, 60);
            });

            window.addEventListener('wheel', () => {
                clearTimeout(hoverTimer);
                scrollGuard.style.pointerEvents = 'auto';
            }, { capture: true, passive: true });
        }

        // --- AURORA GLOW ---
        const aCanvas = document.getElementById('auroraCanvas');
        if (aCanvas) {
            const aCtx = aCanvas.getContext('2d');
            const photoBox = document.getElementById('photoContainer');
            let aW, aH;
            let intensity = 0;
            let targetIntensity = 0;
            let mouseX = 0.5, mouseY = 0.5;
            let smoothX = 0.5, smoothY = 0.5;

            function aResize() {
                const rect = photoBox.getBoundingClientRect();
                aW = aCanvas.width = rect.width * 2;
                aH = aCanvas.height = rect.height * 2;
            }
            aResize();
            window.addEventListener('resize', aResize);

            photoBox.addEventListener('mousemove', (e) => {
                const rect = photoBox.getBoundingClientRect();
                mouseX = (e.clientX - rect.left) / rect.width;
                mouseY = (e.clientY - rect.top) / rect.height;
                targetIntensity = 1;
            });
            photoBox.addEventListener('mouseleave', () => { targetIntensity = 0; });
            photoBox.style.pointerEvents = 'auto';

            let time = 0;
            function drawAurora() {
                aCtx.clearRect(0, 0, aW, aH);
                time += 0.008;

                intensity += (targetIntensity - intensity) * 0.04;
                smoothX += (mouseX - smoothX) * 0.06;
                smoothY += (mouseY - smoothY) * 0.06;

                const isDark = document.body.classList.contains('dark');
                const cx = aW / 2;
                const cy = aH / 2;

                // Three aurora blobs that drift and fade
                const blobs = [
                    {
                        x: cx + Math.sin(time * 0.7) * 80 + (smoothX - 0.5) * 150 * intensity,
                        y: cy + Math.cos(time * 0.5) * 60 + (smoothY - 0.5) * 100 * intensity,
                        rx: aW * 0.35 + Math.sin(time * 0.4) * 40,
                        ry: aH * 0.25 + Math.cos(time * 0.6) * 30,
                        r: 1, g: 118, b: 211,
                        baseAlpha: isDark ? 0.15 : 0.18,
                        hoverAlpha: isDark ? 0.35 : 0.4
                    },
                    {
                        x: cx + Math.cos(time * 0.5) * 90 + (smoothX - 0.5) * 130 * intensity,
                        y: cy + Math.sin(time * 0.8) * 70 + (smoothY - 0.5) * 80 * intensity,
                        rx: aW * 0.3 + Math.cos(time * 0.3) * 35,
                        ry: aH * 0.22 + Math.sin(time * 0.5) * 25,
                        r: 0, g: 161, b: 224,
                        baseAlpha: isDark ? 0.12 : 0.14,
                        hoverAlpha: isDark ? 0.3 : 0.35
                    },
                    {
                        x: cx + Math.sin(time * 0.9) * 70 + (smoothX - 0.5) * 110 * intensity,
                        y: cy + Math.cos(time * 0.3) * 80 + (smoothY - 0.5) * 120 * intensity,
                        rx: aW * 0.28 + Math.sin(time * 0.6) * 30,
                        ry: aH * 0.2 + Math.cos(time * 0.4) * 20,
                        r: 26, g: 214, b: 255,
                        baseAlpha: isDark ? 0.1 : 0.12,
                        hoverAlpha: isDark ? 0.25 : 0.3
                    }
                ];

                blobs.forEach(b => {
                    const alpha = b.baseAlpha + (b.hoverAlpha - b.baseAlpha) * intensity;
                    const grad = aCtx.createRadialGradient(b.x, b.y, 0, b.x, b.y, Math.max(b.rx, b.ry));
                    grad.addColorStop(0, 'rgba(' + b.r + ',' + b.g + ',' + b.b + ',' + alpha + ')');
                    grad.addColorStop(0.4, 'rgba(' + b.r + ',' + b.g + ',' + b.b + ',' + (alpha * 0.6) + ')');
                    grad.addColorStop(1, 'rgba(' + b.r + ',' + b.g + ',' + b.b + ', 0)');

                    aCtx.save();
                    aCtx.translate(b.x, b.y);
                    aCtx.scale(1, b.ry / b.rx);
                    aCtx.translate(-b.x, -b.y);
                    aCtx.beginPath();
                    aCtx.arc(b.x, b.y, b.rx, 0, Math.PI * 2);
                    aCtx.fillStyle = grad;
                    aCtx.fill();
                    aCtx.restore();
                });

                requestAnimationFrame(drawAurora);
            }
            drawAurora();
        }
    })();
    </script>

</body>
</html>
